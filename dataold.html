<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media and the Stock Market</title>
    <link rel="stylesheet" href="data.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
<body>
  <nav class="navbar">
    <a href="home.html">
      <img src="logo.png" id="logo">
    </a>
    <div id="right">
      <a href="home.html">Home</a>
      <a href="resources.html">Resources</a>
      <a href="data.html">Data</a>
    </div>
  </nav>  

  <section id="datatables">
    <h1>Reddit QQQ Data Tables</h1>

    <!-- Core Conclusions -->
    <div class="title">
      <h3>Core Conclusions</h3>
      <ul>
        <li><strong>Sentiment-Volume Relationship:</strong> There appears to be a positive correlation between Reddit discussion activity and QQQ trading volume, suggesting that increased social media attention may lead to higher market participation.</li>
        <li><strong>Extreme Sentiment Impact:</strong> Days with extreme sentiment (both positive and negative) tend to be followed by larger price movements, indicating that strong sentiment may have predictive value for market movements.</li>
        <li><strong>Post Popularity:</strong> Highly upvoted posts show a stronger correlation with next-day price changes than less popular posts, suggesting that post visibility may influence market behavior.</li>
        <li><strong>Sentiment Components:</strong> The balance between positive, neutral, and negative sentiment appears to shift before significant price movements, potentially serving as an early indicator of market sentiment changes.</li>
        <li><strong>Immediate vs Delayed Impact:</strong> While sentiment shows some immediate impact on same-day price movements, the strongest correlations appear with next-day price changes, suggesting a delayed market reaction to social media sentiment.</li>
      </ul>
    </div>
    
    <h3>1. Sentiment Analysis</h3>
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Total Posts</th>
          <th>Positive</th>
          <th>Negative</th>
          <th>Neutral</th>
          <th>Avg Sentiment</th>
          <th>Total Comments</th>
          <th>Avg Score</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>16/08/2021</td><td>10</td><td>9</td><td>1</td><td>0</td><td>0.274</td><td>300</td><td>72.7</td></tr>
        <tr><td>15/08/2021</td><td>10</td><td>9</td><td>1</td><td>0</td><td>0.242</td><td>12,626</td><td>2,428.6</td></tr>
        <tr><td>14/08/2021</td><td>10</td><td>1</td><td>4</td><td>5</td><td>-0.092</td><td>4,069</td><td>3,610.1</td></tr>
        <tr><td>13/08/2021</td><td>10</td><td>5</td><td>2</td><td>3</td><td>0.125</td><td>39,724</td><td>3,386.7</td></tr>
        <tr><td>12/08/2021</td><td>10</td><td>7</td><td>1</td><td>2</td><td>0.195</td><td>32,144</td><td>2,617.1</td></tr>
        <tr><td>11/08/2021</td><td>10</td><td>5</td><td>1</td><td>4</td><td>0.169</td><td>28,550</td><td>4,267.2</td></tr>
        <tr><td>10/08/2021</td><td>10</td><td>6</td><td>2</td><td>2</td><td>0.192</td><td>30,965</td><td>1,304.0</td></tr>
        <tr><td>09/08/2021</td><td>10</td><td>5</td><td>0</td><td>5</td><td>0.153</td><td>26,518</td><td>5,908.7</td></tr>
        <tr><td>08/08/2021</td><td>10</td><td>5</td><td>0</td><td>5</td><td>0.135</td><td>12,182</td><td>5,939.7</td></tr>
        <tr><td>07/08/2021</td><td>10</td><td>0</td><td>3</td><td>7</td><td>-0.058</td><td>3,874</td><td>6,826.5</td></tr>
      </tbody>
    </table>
    
    <!-- Chart 1 -->
    <div id="sentiment_components" class="title">
      <h3>Sentiment Components Analysis</h3>
      <p>This stacked bar chart shows the daily distribution of sentiment components (positive, neutral, and negative) with the QQQ price overlaid as a line. We're examining how the balance of different sentiment types relates to price movements and whether certain sentiment patterns tend to precede price changes.</p>
    </div>
    <img src="chart1.png" class="chart">

    <!-- Chart 2 -->
    <div id="sentiment_extremes" class="title">
      <h3>Extreme Sentiment Days Analysis</h3>
      <p>This visualization focuses on days with the highest and lowest sentiment values, comparing them to next-day price changes. The point size represents the number of posts that day. We're investigating whether extreme sentiment days (both positive and negative) tend to predict significant price movements, and if the volume of posts affects this relationship.</p>
    </div>
    <div class="chart-wrapper">
      <canvas id="extremesChart"></canvas>
    </div>

    <!-- Chart 3 -->
    <div id="sentiment_volatility" class="title">
      <h3>Sentiment Strength vs Price Volatility</h3>
      <p>This visualization examines whether stronger sentiment (measured by the number of positive posts) correlates with more volatile price movements. The daily price range (High - Low) is used as a measure of volatility. We're investigating if stronger sentiment leads to more dramatic price swings during the trading day.</p>
    </div>
    <img src="chart10.png" class="chart">

    <!-- Price Impact Data Table -->
     <h3>2. Price Impact Analysis</h3>
    <table class="data-table">
      <thead>
          <tr>
              <th>Date</th>
              <th>Avg Sentiment</th>
              <th>Posts</th>
              <th>Open</th>
              <th>Close</th>
              <th>Price Change %</th>
              <th>Volume</th>
          </tr>
      </thead>
      <tbody>
        <tr>
            <td>16/08/2021</td>
            <td>0.274</td>
            <td>10</td>
            <td>$367.67</td>
            <td>$368.98</td>
            <td>0.36%</td>
            <td>35,044,107</td>
        </tr>
                        <tr>
            <td>15/08/2021</td>
            <td>0.242</td>
            <td>10</td>
            <td>$0.00</td>
            <td>$0.00</td>
            <td>0.00%</td>
            <td>0</td>
        </tr>
                        <tr>
            <td>14/08/2021</td>
            <td>-0.092</td>
            <td>10</td>
            <td>$0.00</td>
            <td>$0.00</td>
            <td>0.00%</td>
            <td>0</td>
        </tr>
                        <tr>
            <td>13/08/2021</td>
            <td>0.125</td>
            <td>10</td>
            <td>$367.89</td>
            <td>$368.82</td>
            <td>0.25%</td>
            <td>19,336,190</td>
        </tr>
                        <tr>
            <td>12/08/2021</td>
            <td>0.195</td>
            <td>10</td>
            <td>$365.69</td>
            <td>$367.53</td>
            <td>0.50%</td>
            <td>26,003,877</td>
        </tr>
                        <tr>
            <td>11/08/2021</td>
            <td>0.169</td>
            <td>10</td>
            <td>$368.14</td>
            <td>$366.21</td>
            <td>-0.52%</td>
            <td>34,249,812</td>
        </tr>
                        <tr>
            <td>10/08/2021</td>
            <td>0.192</td>
            <td>10</td>
            <td>$369.26</td>
            <td>$366.84</td>
            <td>-0.66%</td>
            <td>35,130,796</td>
        </tr>
                        <tr>
            <td>09/08/2021</td>
            <td>0.153</td>
            <td>10</td>
            <td>$368.52</td>
            <td>$368.73</td>
            <td>0.06%</td>
            <td>25,960,245</td>
        </tr>
                        <tr>
            <td>08/08/2021</td>
            <td>0.135</td>
            <td>10</td>
            <td>$0.00</td>
            <td>$0.00</td>
            <td>0.00%</td>
            <td>0</td>
        </tr>
                        <tr>
            <td>07/08/2021</td>
            <td>-0.058</td>
            <td>10</td>
            <td>$0.00</td>
            <td>$0.00</td>
            <td>0.00%</td>
            <td>0</td>
        </tr>
                </tbody>
  </table>
    <!-- Chart 4 -->
    <div id="positive_posts_price" class="title">
      <h3>Price vs Sentiment Correlation</h3>
      <p>This dual-axis chart shows the relationship between QQQ price and sentiment.</p>
    </div>
    <img src="chart4.png" class="chart">

    <!-- Chart 5 -->
    <div id="comment_volume" class="title">
      <h3>Sentiment Momentum Analysis</h3>
      <p>This scatter plot shows the relationship between daily average sentiment and next-day price changes.</p>
    </div>
    <img src="chart5.png" class="chart">

    <!-- Chart 6 -->
    <div id="score_impact" class="title">
      <h3>Sentiment Lag Analysis</h3>
      <p>This heatmap shows how sentiment impacts price over multiple days.</p>
    </div>
    <img src="chart6.png" class="chart">

    <h3>3. Trading Activity Analysis</h3>
        
        <!-- Trading Activity Data Table -->
                <table class="data-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Posts</th>
                    <th>Comments</th>
                    <th>Avg Score</th>
                    <th>Trading Volume</th>
                    <th>Price Range</th>
                    <th>Price Change %</th>
                </tr>
            </thead>
            <tbody>
                                    <tr>
                        <td>16/08/2021</td>
                        <td>10</td>
                        <td>300</td>
                        <td>72.7</td>
                        <td>35,044,107</td>
                        <td>$5.32</td>
                        <td>0.36%</td>
                    </tr>
                                    <tr>
                        <td>15/08/2021</td>
                        <td>10</td>
                        <td>12,626</td>
                        <td>2,428.6</td>
                        <td>0</td>
                        <td>$0.00</td>
                        <td>0.00%</td>
                    </tr>
                                    <tr>
                        <td>14/08/2021</td>
                        <td>10</td>
                        <td>4,069</td>
                        <td>3,610.1</td>
                        <td>0</td>
                        <td>$0.00</td>
                        <td>0.00%</td>
                    </tr>
                                    <tr>
                        <td>13/08/2021</td>
                        <td>10</td>
                        <td>39,724</td>
                        <td>3,386.7</td>
                        <td>19,336,190</td>
                        <td>$1.78</td>
                        <td>0.25%</td>
                    </tr>
                                    <tr>
                        <td>12/08/2021</td>
                        <td>10</td>
                        <td>32,144</td>
                        <td>2,617.1</td>
                        <td>26,003,877</td>
                        <td>$3.60</td>
                        <td>0.50%</td>
                    </tr>
                                    <tr>
                        <td>11/08/2021</td>
                        <td>10</td>
                        <td>28,550</td>
                        <td>4,267.2</td>
                        <td>34,249,812</td>
                        <td>$3.81</td>
                        <td>-0.52%</td>
                    </tr>
                                    <tr>
                        <td>10/08/2021</td>
                        <td>10</td>
                        <td>30,965</td>
                        <td>1,304.0</td>
                        <td>35,130,796</td>
                        <td>$3.94</td>
                        <td>-0.66%</td>
                    </tr>
                                    <tr>
                        <td>09/08/2021</td>
                        <td>10</td>
                        <td>26,518</td>
                        <td>5,908.7</td>
                        <td>25,960,245</td>
                        <td>$1.88</td>
                        <td>0.06%</td>
                    </tr>
                                    <tr>
                        <td>08/08/2021</td>
                        <td>10</td>
                        <td>12,182</td>
                        <td>5,939.7</td>
                        <td>0</td>
                        <td>$0.00</td>
                        <td>0.00%</td>
                    </tr>
                                    <tr>
                        <td>07/08/2021</td>
                        <td>10</td>
                        <td>3,874</td>
                        <td>6,826.5</td>
                        <td>0</td>
                        <td>$0.00</td>
                        <td>0.00%</td>
                    </tr>
                            </tbody>
        </table>

    <!-- Chart 7-->
    <div id="trading_volume" class="title">
      <h3>Trading Volume vs Reddit Comments</h3>
      <p>This visualization focuses on days with the highest and lowest sentiment values, comparing them to next-day price changes. The point size represents the number of posts that day. We're investigating whether extreme sentiment days (both positive and negative) tend to predict significant price movements, and if the volume of posts affects this relationship.</p>
    </div>
    <img src="chart8.png" class="chart">

    <!-- Chart 8-->
    <div class="title">
      <h3>Volume vs Reddit Activity</h3>
      <p>This dual-axis chart compares trading volume with Reddit activity.</p>
    </div>
    <img src="chart3.png" class="chart">

    <!-- Chart 9-->
    <div class="title">
      <h3>Price Volatility vs Sentiment</h3>
      <p>This scatter plot shows the relationship between price volatility and sentiment.</p>
    </div>
    <img src="chart9.png" class="chart">

  </section>

  <script>
    /*const endpoints = [
      { id: 'all', title: 'Basic Statistics', url: 'https://dannyhua.webdev.iyaserver.com/acad274/get_reddit_qqq_data.php?type=all' },
      { id: 'positive_posts_price', title: 'Positive Posts and QQQ Prices', url: 'https://dannyhua.webdev.iyaserver.com/acad274/get_reddit_qqq_data.php?type=positive_posts_price' },
      { id: 'sentiment_volatility', title: 'Sentiment Strength vs Price Volatility', url: 'https://dannyhua.webdev.iyaserver.com/acad274/get_reddit_qqq_data.php?type=sentiment_volatility' },
      { id: 'comment_volume', title: 'Comment Activity and Trading Volume', url: 'https://dannyhua.webdev.iyaserver.com/acad274/get_reddit_qqq_data.php?type=comment_volume' },
      { id: 'sentiment_components', title: 'Daily Sentiment Breakdown', url: 'https://dannyhua.webdev.iyaserver.com/acad274/get_reddit_qqq_data.php?type=sentiment_components' },
      { id: 'score_impact', title: 'Post Scores and Next-day Price Changes', url: 'https://dannyhua.webdev.iyaserver.com/acad274/get_reddit_qqq_data.php?type=score_impact' },
      { id: 'sentiment_extremes', title: 'Extreme Sentiment Days', url: 'https://dannyhua.webdev.iyaserver.com/acad274/get_reddit_qqq_data.php?type=sentiment_extremes' }
    ];

    function createTableFromJson(data) {
      const keys = Object.keys(data[0]);
      let table = '<table><thead><tr>';
      keys.forEach(key => table += `<th>${key}</th>`);
      table += '</tr></thead><tbody>';
      data.forEach(row => {
        table += '<tr>';
        keys.forEach(key => table += `<td>${row[key]}</td>`);
        table += '</tr>';
      });
      table += '</tbody></table>';
      return table;
    }

    endpoints.forEach(ep => {
      $.getJSON(ep.url, function (data) {
        const content = `${Array.isArray(data) ? createTableFromJson(data) : createTableFromJson([data])}`;
        $(`#${ep.id}`).append(content);
      }).fail(function () {
        $(`#${ep.id}`).append(`<p style="color: red;">Failed to load data.</p>`);
      });
    });
    */
    // First chart sentiment components
    var sentimentComponentsData = {"dates":["01\/02\/2021","01\/03\/2021","01\/04\/2021","01\/06\/2021","01\/07\/2021","02\/02\/2021","02\/03\/2021","02\/07\/2021","02\/08\/2021","03\/02\/2021","03\/03\/2021","03\/08\/2021","04\/02\/2021","04\/03\/2021","04\/08\/2021","05\/02\/2021","05\/03\/2021","05\/04\/2021","05\/05\/2021","05\/08\/2021","06\/04\/2021","06\/05\/2021","06\/07\/2021","06\/08\/2021","07\/04\/2021","07\/05\/2021","07\/07\/2021","08\/02\/2021","08\/03\/2021","08\/04\/2021","08\/07\/2021","09\/02\/2021","09\/03\/2021","09\/04\/2021","09\/07\/2021","09\/08\/2021","10\/02\/2021","10\/03\/2021","10\/05\/2021","10\/06\/2021","10\/08\/2021","11\/02\/2021","11\/03\/2021","11\/05\/2021","11\/06\/2021","11\/08\/2021","12\/02\/2021","12\/03\/2021","12\/04\/2021","12\/05\/2021","12\/07\/2021","12\/08\/2021","13\/04\/2021","13\/05\/2021","13\/07\/2021","13\/08\/2021","14\/04\/2021","14\/05\/2021","14\/07\/2021","15\/03\/2021","15\/04\/2021","15\/06\/2021","15\/07\/2021","16\/02\/2021","16\/03\/2021","16\/04\/2021","16\/06\/2021","16\/07\/2021","16\/08\/2021","17\/02\/2021","17\/03\/2021","17\/05\/2021","17\/06\/2021","18\/02\/2021","18\/03\/2021","18\/05\/2021","18\/06\/2021","19\/02\/2021","19\/03\/2021","19\/04\/2021","19\/05\/2021","19\/07\/2021","20\/04\/2021","20\/05\/2021","20\/07\/2021","21\/04\/2021","21\/05\/2021","21\/06\/2021","22\/02\/2021","22\/03\/2021","22\/04\/2021","22\/06\/2021","23\/02\/2021","23\/03\/2021","23\/04\/2021","23\/06\/2021","24\/02\/2021","24\/03\/2021","24\/05\/2021","24\/06\/2021","25\/02\/2021","25\/03\/2021","25\/05\/2021","25\/06\/2021","26\/02\/2021","26\/03\/2021","26\/04\/2021","26\/05\/2021","27\/04\/2021","27\/05\/2021","28\/01\/2021","28\/04\/2021","28\/05\/2021","28\/06\/2021","29\/01\/2021","29\/03\/2021","29\/04\/2021","29\/06\/2021","30\/03\/2021","30\/04\/2021","30\/06\/2021","31\/03\/2021"],"sentiment":[{"positive":0.0754000000655651037018145643742172978818416595458984375,"neutral":0.85159999728202817603772700749686919152736663818359375,"negative":0.07299999892711639404296875},{"positive":0.05999999940395354947053618843710864894092082977294921875,"neutral":0.85459999591112134620374263249686919152736663818359375,"negative":0.0855000019073486328125},{"positive":0.0931999981403350830078125,"neutral":0.90679999589920046165758549250313080847263336181640625,"negative":0},{"positive":0.04040000140666961947477631156289135105907917022705078125,"neutral":0.8712999999523163285886084850062616169452667236328125,"negative":0.08830000162124633511506743843710864894092082977294921875},{"positive":0.0906999990344047601897869981257827021181583404541015625,"neutral":0.9092999994754791259765625,"negative":0},{"positive":0.1101000025868415777008380018742172978818416595458984375,"neutral":0.773299992084503173828125,"negative":0.11660000234842300692594818656289135105907917022705078125},{"positive":0.11130000352859496792756743843710864894092082977294921875,"neutral":0.8416000038385391679440772350062616169452667236328125,"negative":0.04710000082850455960237212593710864894092082977294921875},{"positive":0.0997999995946884099762286268742172978818416595458984375,"neutral":0.90020000338554384544664799250313080847263336181640625,"negative":0},{"positive":0.05029999911785125454866118843710864894092082977294921875,"neutral":0.92109999656677243873303950749686919152736663818359375,"negative":0.028600001335144044356528780781445675529539585113525390625},{"positive":0.1083000004291534423828125,"neutral":0.8686999976634979248046875,"negative":0.023000000417232512039955594218554324470460414886474609375},{"positive":0.06360000073909759243928618843710864894092082977294921875,"neutral":0.8674000024795531782473290149937383830547332763671875,"negative":0.0689999997615814153473223768742172978818416595458984375},{"positive":0.174300003051757801397769753748434595763683319091796875,"neutral":0.7548000037670135053957665149937383830547332763671875,"negative":0.0709000021219253484527911268742172978818416595458984375},{"positive":0.1172000005841255243499432481257827021181583404541015625,"neutral":0.7987000018358230146731102649937383830547332763671875,"negative":0.083999998867511749267578125},{"positive":0.138000001013278972283870871251565404236316680908203125,"neutral":0.80160000324249269798571049250313080847263336181640625,"negative":0.0604999996721744537353515625},{"positive":0.1041000023484230097015057481257827021181583404541015625,"neutral":0.8499000027775764909421241100062616169452667236328125,"negative":0.04600000083446502407991118843710864894092082977294921875},{"positive":0.0803000018000602777679119981257827021181583404541015625,"neutral":0.90550000071525571510022700749686919152736663818359375,"negative":0.01420000046491622959499157019536141888238489627838134765625},{"positive":0.0135000005364418022846262346092771622352302074432373046875,"neutral":0.93859999775886537864977299250313080847263336181640625,"negative":0.047899998724460601806640625},{"positive":0.140799999982118617669613058751565404236316680908203125,"neutral":0.859200000762939453125,"negative":0},{"positive":0.214299999177455902099609375,"neutral":0.77710000276565549537366450749686919152736663818359375,"negative":0.00850000008940696681614124230463858111761510372161865234375},{"positive":0.1283999994397163335602130018742172978818416595458984375,"neutral":0.8716000020503997802734375,"negative":0},{"positive":0.0927999973297119196136151231257827021181583404541015625,"neutral":0.876800000667572021484375,"negative":0.030400000512599945068359375},{"positive":0.03540000021457671841584868843710864894092082977294921875,"neutral":0.83359999954700469970703125,"negative":0.1310000032186508234222088731257827021181583404541015625},{"positive":0.0767000004649162347991619981257827021181583404541015625,"neutral":0.891900002956390380859375,"negative":0.031400001049041746659096219218554324470460414886474609375},{"positive":0.021899999678134919600669405781445675529539585113525390625,"neutral":0.8780000090599060502682959850062616169452667236328125,"negative":0.1001000016927719171722088731257827021181583404541015625},{"positive":0.10189999938011169711149506156289135105907917022705078125,"neutral":0.87139999270439150169664799250313080847263336181640625,"negative":0.026699998974800111251060030781445675529539585113525390625},{"positive":0.06759999990463257113493256156289135105907917022705078125,"neutral":0.8502000004053116288815772350062616169452667236328125,"negative":0.08220000267028808316194243843710864894092082977294921875},{"positive":0.0880000010132789556305255018742172978818416595458984375,"neutral":0.912000000476837158203125,"negative":0},{"positive":0.192900002002716064453125,"neutral":0.8071000009775162187253272350062616169452667236328125,"negative":0},{"positive":0.153800000250339519158870871251565404236316680908203125,"neutral":0.7715000033378600630129540149937383830547332763671875,"negative":0.0746000014245510045807208143742172978818416595458984375},{"positive":0.0512000024318695068359375,"neutral":0.92090000212192535400390625,"negative":0.027900001406669615311439969218554324470460414886474609375},{"positive":0.121899999678134918212890625,"neutral":0.7884999990463257280026709850062616169452667236328125,"negative":0.08959999978542328158415131156289135105907917022705078125},{"positive":0.0902999997138977106292401231257827021181583404541015625,"neutral":0.8389999985694884809817040149937383830547332763671875,"negative":0.07070000022649765292204193656289135105907917022705078125},{"positive":0.1462999969720840398590411268742172978818416595458984375,"neutral":0.8317999958992003950442040149937383830547332763671875,"negative":0.021899999678134919600669405781445675529539585113525390625},{"positive":0.04510000050067901333772368843710864894092082977294921875,"neutral":0.95490000247955320045178950749686919152736663818359375,"negative":0},{"positive":0.10690000206232071200407318656289135105907917022705078125,"neutral":0.8668999969959259033203125,"negative":0.0261999994516372673725168596092771622352302074432373046875},{"positive":0.0783999994397163446624432481257827021181583404541015625,"neutral":0.9216000020503998246823584850062616169452667236328125,"negative":0},{"positive":0.07569999992847442626953125,"neutral":0.890100002288818359375,"negative":0.03420000076293945590055756156289135105907917022705078125},{"positive":0.1597999989986419733245526231257827021181583404541015625,"neutral":0.822899997234344482421875,"negative":0.0172999992966651923442800153907228377647697925567626953125},{"positive":0.020099999755620955033119656718554324470460414886474609375,"neutral":0.9504999995231628862057959850062616169452667236328125,"negative":0.029400000721216200394447781718554324470460414886474609375},{"positive":0.148699995875358592645198996251565404236316680908203125,"neutral":0.8512999981641768965090477649937383830547332763671875,"negative":0},{"positive":0.1128000035881996099274005018742172978818416595458984375,"neutral":0.84040000140666959449475825749686919152736663818359375,"negative":0.046800000965595243973549344218554324470460414886474609375},{"positive":0.020299999415874479813393094218554324470460414886474609375,"neutral":0.97160000205039975806897700749686919152736663818359375,"negative":0.0081000000238418586040456403907228377647697925567626953125},{"positive":0.0173999994993209831928293596092771622352302074432373046875,"neutral":0.98259999752044679954821049250313080847263336181640625,"negative":0},{"positive":0.1509999990463256891448651231257827021181583404541015625,"neutral":0.8286999940872192826901709850062616169452667236328125,"negative":0.0201999999582767493511159528907228377647697925567626953125},{"positive":0.0664000004529952947418536268742172978818416595458984375,"neutral":0.9064999997615814653073584850062616169452667236328125,"negative":0.027000000327825547652427218281445675529539585113525390625},{"positive":0.054500000178813935713950655781445675529539585113525390625,"neutral":0.9287000000476837158203125,"negative":0.0168000001460313803935964216407228377647697925567626953125},{"positive":0,"neutral":0.92459999918937685325914799250313080847263336181640625,"negative":0.0754000008106231744964276231257827021181583404541015625},{"positive":0.02899999916553497314453125,"neutral":0.9657000005245208740234375,"negative":0.00529999993741512263889514855463858111761510372161865234375},{"positive":0.05140000134706497469938568656289135105907917022705078125,"neutral":0.89740000069141390159899174250313080847263336181640625,"negative":0.0512000024318695068359375},{"positive":0.03939999938011169711149506156289135105907917022705078125,"neutral":0.96059999465942380592053950749686919152736663818359375,"negative":0},{"positive":0.100800000131130218505859375,"neutral":0.8776000022888184037839209850062616169452667236328125,"negative":0.021600000560283660888671875},{"positive":0.11780000180006026944123931343710864894092082977294921875,"neutral":0.8261000037193297895754540149937383830547332763671875,"negative":0.05609999895095825472868256156289135105907917022705078125},{"positive":0.04399999901652336398161224906289135105907917022705078125,"neutral":0.7120999991893768310546875,"negative":0.2437999978661537225921307481257827021181583404541015625},{"positive":0.056899999827146531539145968281445675529539585113525390625,"neutral":0.77249999940395353004163325749686919152736663818359375,"negative":0.1706000030040741022308026231257827021181583404541015625},{"positive":0.10219999849796294888459868843710864894092082977294921875,"neutral":0.88350000381469728782946049250313080847263336181640625,"negative":0.0143000006675720221782643903907228377647697925567626953125},{"positive":0.0900999993085861150543536268742172978818416595458984375,"neutral":0.8412999987602234330807959850062616169452667236328125,"negative":0.0686000004410743657867755018742172978818416595458984375},{"positive":0.03880000039935112277067474906289135105907917022705078125,"neutral":0.94219999909400942161852299250313080847263336181640625,"negative":0.018899999558925628662109375},{"positive":0.1261999994516372625152911268742172978818416595458984375,"neutral":0.86340000629425051048571049250313080847263336181640625,"negative":0.0104000002145767204975168596092771622352302074432373046875},{"positive":0.107900001108646392822265625,"neutral":0.8498000025749206098879540149937383830547332763671875,"negative":0.04230000078678131103515625},{"positive":0.10390000045299530029296875,"neutral":0.8891000032424927201901709850062616169452667236328125,"negative":0.007000000029802322214222964902319290558807551860809326171875},{"positive":0.0902000010013580266754473768742172978818416595458984375,"neutral":0.87699999809265138939196049250313080847263336181640625,"negative":0.032899999618530274825278780781445675529539585113525390625},{"positive":0.1392000019550323486328125,"neutral":0.8133000016212463822995459850062616169452667236328125,"negative":0.04740000069141388217008881156289135105907917022705078125},{"positive":0.04029999971389770785368256156289135105907917022705078125,"neutral":0.93250000476837158203125,"negative":0.0272000014781951897357981096092771622352302074432373046875},{"positive":0.204200002551078785284488503748434595763683319091796875,"neutral":0.75369999706745149925524174250313080847263336181640625,"negative":0.04199999868869781771696381156289135105907917022705078125},{"positive":0.09389999955892562588655181343710864894092082977294921875,"neutral":0.9060999929904938188229834850062616169452667236328125,"negative":0},{"positive":0.1061000019311904851715411268742172978818416595458984375,"neutral":0.83449999988079071044921875,"negative":0.05949999839067458828889556343710864894092082977294921875},{"positive":0.11300000250339507779084868843710864894092082977294921875,"neutral":0.8367999970912933793698584850062616169452667236328125,"negative":0.05020000040531158447265625},{"positive":0.06930000036954879483186431343710864894092082977294921875,"neutral":0.8810000002384186235104834850062616169452667236328125,"negative":0.049799999594688414139564969218554324470460414886474609375},{"positive":0.09919999837875366488493256156289135105907917022705078125,"neutral":0.9008000016212462934817040149937383830547332763671875,"negative":0},{"positive":0.1057000026106834356109942518742172978818416595458984375,"neutral":0.8203999966382979902590477649937383830547332763671875,"negative":0.07390000000596046170198150093710864894092082977294921875},{"positive":0.08549999892711639126741118843710864894092082977294921875,"neutral":0.8547999978065490278567040149937383830547332763671875,"negative":0.05970000028610229769743256156289135105907917022705078125},{"positive":0.08010000064969062527620025093710864894092082977294921875,"neutral":0.83400000035762789085680424250313080847263336181640625,"negative":0.0858999975025653839111328125},{"positive":0.09000000059604644497834868843710864894092082977294921875,"neutral":0.8862999975681304931640625,"negative":0.023700000345706941085044405781445675529539585113525390625},{"positive":0.08120000064373016079866118843710864894092082977294921875,"neutral":0.9085000038146973100339209850062616169452667236328125,"negative":0.0103000000119209296489675153907228377647697925567626953125},{"positive":0.0293000012636184699321706403907228377647697925567626953125,"neutral":0.916299998760223388671875,"negative":0.05439999997615814486540131156289135105907917022705078125},{"positive":0.0209000006318092353130300153907228377647697925567626953125,"neutral":0.958700001239776611328125,"negative":0.0203999996185302741313893903907228377647697925567626953125},{"positive":0.169699999690055836065738503748434595763683319091796875,"neutral":0.8115000009536743608151709850062616169452667236328125,"negative":0.018799999356269837813560030781445675529539585113525390625},{"positive":0.08449999988079071044921875,"neutral":0.8759999990463256391848290149937383830547332763671875,"negative":0.039499999582767487960044405781445675529539585113525390625},{"positive":0.030400000885128973526772000468554324470460414886474609375,"neutral":0.89909999966621401146227299250313080847263336181640625,"negative":0.07050000131130218505859375},{"positive":0.04200000017881393155061431343710864894092082977294921875,"neutral":0.8256999969482421430910790149937383830547332763671875,"negative":0.132300001382827769891292746251565404236316680908203125},{"positive":0.08710000105202198028564453125,"neutral":0.8890999972820281538332665149937383830547332763671875,"negative":0.0236999996006488806987722028907228377647697925567626953125},{"positive":0.047399999201297761397544405781445675529539585113525390625,"neutral":0.8989000022411346435546875,"negative":0.0537000000476837158203125},{"positive":0.089299999177455902099609375,"neutral":0.78850000500679018333727299250313080847263336181640625,"negative":0.12220000028610229769743256156289135105907917022705078125},{"positive":0.141699996590614329949886496251565404236316680908203125,"neutral":0.83569999635219571754163325749686919152736663818359375,"negative":0.0225999996066093451763112653907228377647697925567626953125},{"positive":0.09060000181198120394743256156289135105907917022705078125,"neutral":0.8880000010132789167727196399937383830547332763671875,"negative":0.021399999409914015335854031718554324470460414886474609375},{"positive":0.1196000002324581201751385606257827021181583404541015625,"neutral":0.86210000514984130859375,"negative":0.0182999998331069939350168596092771622352302074432373046875},{"positive":0.0291000001132488243793527971092771622352302074432373046875,"neutral":0.85440000295639040306383549250313080847263336181640625,"negative":0.1164999991655349675934161268742172978818416595458984375},{"positive":0.0821999996900558416168536268742172978818416595458984375,"neutral":0.8810000002384186235104834850062616169452667236328125,"negative":0.03680000007152557650602631156289135105907917022705078125},{"positive":0.0787000000476837102691973768742172978818416595458984375,"neutral":0.88199999332427980736071049250313080847263336181640625,"negative":0.039299999922513963179770968281445675529539585113525390625},{"positive":0.05469999909400939663850493843710864894092082977294921875,"neutral":0.9064999997615814653073584850062616169452667236328125,"negative":0.0388000011444091796875},{"positive":0,"neutral":0.97139999866485593482678950749686919152736663818359375,"negative":0.028600001335144044356528780781445675529539585113525390625},{"positive":0.07160000056028366366422943656289135105907917022705078125,"neutral":0.92840000391006471947008549250313080847263336181640625,"negative":0},{"positive":0.059100000560283659500893094218554324470460414886474609375,"neutral":0.9076000034809112992917334850062616169452667236328125,"negative":0.03330000042915344515837006156289135105907917022705078125},{"positive":0.05740000009536742886506743843710864894092082977294921875,"neutral":0.92760000228881833717053950749686919152736663818359375,"negative":0.01500000059604644775390625},{"positive":0.1187999978661537225921307481257827021181583404541015625,"neutral":0.8674000024795531782473290149937383830547332763671875,"negative":0.0137999996542930609966237653907228377647697925567626953125},{"positive":0.220299999415874470098941628748434595763683319091796875,"neutral":0.64540000259876251220703125,"negative":0.1342999994754791315276776231257827021181583404541015625},{"positive":0.041300000995397566361244656718554324470460414886474609375,"neutral":0.9453999996185302734375,"negative":0.01330000013113021885280407019536141888238489627838134765625},{"positive":0.1054999962449073847015057481257827021181583404541015625,"neutral":0.8671000033617020097409522350062616169452667236328125,"negative":0.0273999989032745368267018903907228377647697925567626953125},{"positive":0.0861000031232833917815838731257827021181583404541015625,"neutral":0.904799997806549072265625,"negative":0.00909999981522560154323375769536141888238489627838134765625},{"positive":0.06620000004768371304475493843710864894092082977294921875,"neutral":0.91159999966621396705335200749686919152736663818359375,"negative":0.0222000002861022956157643903907228377647697925567626953125},{"positive":0.020800000429153440995033719218554324470460414886474609375,"neutral":0.9612999975681304487551415149937383830547332763671875,"negative":0.0179000005125999443744699846092771622352302074432373046875},{"positive":0.0703999996185302734375,"neutral":0.90099999904632566138928950749686919152736663818359375,"negative":0.0285999990999698631977121721092771622352302074432373046875},{"positive":0.045000000298023222489174344218554324470460414886474609375,"neutral":0.9157000005245208296145165149937383830547332763671875,"negative":0.039300000667572020096596219218554324470460414886474609375},{"positive":0.145700003206729877813785378748434595763683319091796875,"neutral":0.8389000028371811357175147350062616169452667236328125,"negative":0.015399999916553497314453125},{"positive":0.033999999612569810347739718281445675529539585113525390625,"neutral":0.9660000026226043257082665149937383830547332763671875,"negative":0},{"positive":0.0156000003218650824809987653907228377647697925567626953125,"neutral":0.908399999141693115234375,"negative":0.07600000053644180575407318656289135105907917022705078125},{"positive":0.098800003528594970703125,"neutral":0.84670000374317166969007075749686919152736663818359375,"negative":0.05450000129640102108918853218710864894092082977294921875},{"positive":0.0469000004231929779052734375,"neutral":0.9189000010490417924557959850062616169452667236328125,"negative":0.03420000076293945590055756156289135105907917022705078125},{"positive":0.0143000006675720221782643903907228377647697925567626953125,"neutral":0.96259999871253965064710200749686919152736663818359375,"negative":0.0231000006198883063579518903907228377647697925567626953125},{"positive":0.03269999921321868618928618843710864894092082977294921875,"neutral":0.8459999978542327436770165149937383830547332763671875,"negative":0.1212999984622001592438067518742172978818416595458984375},{"positive":0.041800000146031378311928250468554324470460414886474609375,"neutral":0.9195000052452086958254540149937383830547332763671875,"negative":0.038700000941753388838950655781445675529539585113525390625},{"positive":0.03409999907016754427946381156289135105907917022705078125,"neutral":0.965900003910064697265625,"negative":0},{"positive":0.10010000020265578946077056343710864894092082977294921875,"neutral":0.82059999704360964134508549250313080847263336181640625,"negative":0.0794000007212161962311114393742172978818416595458984375},{"positive":0.07120000123977661410368256156289135105907917022705078125,"neutral":0.9287999987602233442629540149937383830547332763671875,"negative":0},{"positive":0.076499998569488525390625,"neutral":0.923500001430511474609375,"negative":0},{"positive":0.05480000078678130825959868843710864894092082977294921875,"neutral":0.916299998760223388671875,"negative":0.0289000000804662711406667341407228377647697925567626953125},{"positive":0.10390000343322754183805756156289135105907917022705078125,"neutral":0.89609999954700469970703125,"negative":0},{"positive":0.06850000023841858187712006156289135105907917022705078125,"neutral":0.88380000591278073951428950749686919152736663818359375,"negative":0.047799998521804810958091280781445675529539585113525390625},{"positive":0.059600001573562620682533719218554324470460414886474609375,"neutral":0.91360000371932981177991450749686919152736663818359375,"negative":0.026800000667572022872153780781445675529539585113525390625},{"positive":0.028600001335144044356528780781445675529539585113525390625,"neutral":0.94409999847412107154553950749686919152736663818359375,"negative":0.0272999994456768028949777971092771622352302074432373046875},{"positive":0.118500001728534698486328125,"neutral":0.82419999837875368431383549250313080847263336181640625,"negative":0.05729999840259551724397368843710864894092082977294921875},{"positive":0.09419999942183494845426849906289135105907917022705078125,"neutral":0.84769999384880068138414799250313080847263336181640625,"negative":0.058099998533725737137611844218554324470460414886474609375}],"prices":[322.42000000000001591615728102624416351318359375,323.58999999999997498889570124447345733642578125,324.56999999999999317878973670303821563720703125,332.81999999999999317878973670303821563720703125,354.56999999999999317878973670303821563720703125,327.68000000000000682121026329696178436279296875,318.3999999999999772626324556767940521240234375,358.6399999999999863575794734060764312744140625,364.6000000000000227373675443232059478759765625,326.3799999999999954525264911353588104248046875,309.16000000000002501110429875552654266357421875,366.81000000000000227373675443232059478759765625,330.240000000000009094947017729282379150390625,304.1000000000000227373675443232059478759765625,367.33999999999997498889570124447345733642578125,331.3600000000000136424205265939235687255859375,308.68000000000000682121026329696178436279296875,331.05000000000001136868377216160297393798828125,329.029999999999972715158946812152862548828125,369.67000000000001591615728102624416351318359375,330.81999999999999317878973670303821563720703125,331.509999999999990905052982270717620849609375,360.18999999999999772626324556767940521240234375,368.05000000000001136868377216160297393798828125,331.6200000000000045474735088646411895751953125,334.19999999999998863131622783839702606201171875,360.94999999999998863131622783839702606201171875,333.57999999999998408384271897375583648681640625,299.93999999999999772626324556767940521240234375,335.07999999999998408384271897375583648681640625,358.76999999999998181010596454143524169921875,333.509999999999990905052982270717620849609375,311.76999999999998181010596454143524169921875,337.1100000000000136424205265939235687255859375,361.009999999999990905052982270717620849609375,368.73000000000001818989403545856475830078125,332.75,310.8799999999999954525264911353588104248046875,325.759999999999990905052982270717620849609375,340.3500000000000227373675443232059478759765625,366.83999999999997498889570124447345733642578125,334.57999999999998408384271897375583648681640625,318.04000000000002046363078989088535308837890625,325.31000000000000227373675443232059478759765625,341.240000000000009094947017729282379150390625,366.20999999999997953636921010911464691162109375,336.44999999999998863131622783839702606201171875,315.45999999999997953636921010911464691162109375,336.67000000000001591615728102624416351318359375,316.8899999999999863575794734060764312744140625,362.42000000000001591615728102624416351318359375,367.529999999999972715158946812152862548828125,340.6000000000000227373675443232059478759765625,319.33999999999997498889570124447345733642578125,362.42000000000001591615728102624416351318359375,368.81999999999999317878973670303821563720703125,336.509999999999990905052982270717620849609375,326.3899999999999863575794734060764312744140625,363.06999999999999317878973670303821563720703125,318.82999999999998408384271897375583648681640625,341.6100000000000136424205265939235687255859375,342.259999999999990905052982270717620849609375,360.51999999999998181010596454143524169921875,335.54000000000002046363078989088535308837890625,320.57999999999998408384271897375583648681640625,342.009999999999990905052982270717620849609375,341.009999999999990905052982270717620849609375,357.6000000000000227373675443232059478759765625,368.98000000000001818989403545856475830078125,333.93000000000000682121026329696178436279296875,321.8999999999999772626324556767940521240234375,324.41000000000002501110429875552654266357421875,345.33999999999997498889570124447345733642578125,332.470000000000027284841053187847137451171875,312.04000000000002046363078989088535308837890625,322.220000000000027284841053187847137451171875,342.6299999999999954525264911353588104248046875,331.01999999999998181010596454143524169921875,313.1399999999999863575794734060764312744140625,338.8799999999999954525264911353588104248046875,322.58999999999997498889570124447345733642578125,354.67000000000001591615728102624416351318359375,336.41000000000002501110429875552654266357421875,328.82999999999998408384271897375583648681640625,358.79000000000002046363078989088535308837890625,339.29000000000002046363078989088535308837890625,327.009999999999990905052982270717620849609375,344.3600000000000136424205265939235687255859375,322.43999999999999772626324556767940521240234375,318.6100000000000136424205265939235687255859375,335.19999999999998863131622783839702606201171875,347.56999999999999317878973670303821563720703125,321.48000000000001818989403545856475830078125,317.220000000000027284841053187847137451171875,339.42000000000001591615728102624416351318359375,347.740000000000009094947017729282379150390625,324.1299999999999954525264911353588104248046875,311.8700000000000045474735088646411895751953125,332.509999999999990905052982270717620849609375,349.8899999999999863575794734060764312744140625,312.82999999999998408384271897375583648681640625,311.32999999999998408384271897375583648681640625,332.970000000000027284841053187847137451171875,349.45999999999997953636921010911464691162109375,314.1399999999999863575794734060764312744140625,316,341.6299999999999954525264911353588104248046875,334.1299999999999954525264911353588104248046875,340.1499999999999772626324556767940521240234375,332.8799999999999954525264911353588104248046875,321.31999999999999317878973670303821563720703125,339,333.93000000000000682121026329696178436279296875,353.70999999999997953636921010911464691162109375,314.56000000000000227373675443232059478759765625,315.91000000000002501110429875552654266357421875,340.220000000000027284841053187847137451171875,354.990000000000009094947017729282379150390625,314.31999999999999317878973670303821563720703125,337.990000000000009094947017729282379150390625,354.43000000000000682121026329696178436279296875,319.1299999999999954525264911353588104248046875]};
/*
    var ctx4 = document.getElementById('sentimentComponentsChart').getContext('2d');
    var sentimentComponentsChart = new Chart(ctx4, {
        type: 'bar',
        data: {
            labels: sentimentComponentsData.dates,
            datasets: [
                {
                    label: 'Positive Sentiment',
                    data: sentimentComponentsData.sentiment.map(d => d.positive),
                    backgroundColor: 'rgba(75, 192, 75, 0.6)',
                    stack: 'Stack 0'
                },
                {
                    label: 'Neutral Sentiment',
                    data: sentimentComponentsData.sentiment.map(d => d.neutral),
                    backgroundColor: 'rgba(192, 192, 192, 0.6)',
                    stack: 'Stack 0'
                },
                {
                    label: 'Negative Sentiment',
                    data: sentimentComponentsData.sentiment.map(d => d.negative),
                    backgroundColor: 'rgba(255, 99, 132, 0.6)',
                    stack: 'Stack 0'
                },
                {
                    label: 'QQQ Price',
                    data: sentimentComponentsData.prices,
                    type: 'line',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2,
                    fill: false,
                    yAxisID: 'y1'
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            var label = context.dataset.label || '';
                            if (label === 'QQQ Price') {
                                return label + ': $' + context.raw.toFixed(2);
                            }
                            return label + ': ' + (context.raw * 100).toFixed(1) + '%';
                        }
                    }
                }
            },
            scales: {
                x: {
                    stacked: true,
                    title: {
                        display: true,
                        text: 'Date'
                    }
                },
                y: {
                    stacked: true,
                    title: {
                        display: true,
                        text: 'Sentiment Distribution (%)'
                    },
                    ticks: {
                        callback: function(value) {
                            return (value * 100).toFixed(0) + '%';
                        }
                    }
                },
                y1: {
                    position: 'right',
                    title: {
                        display: true,
                        text: 'QQQ Price ($)'
                    },
                    grid: {
                        drawOnChartArea: false
                    }
                }
            }
        }
    });
    */
    // Second chart Sentiment Extremes
    var extremesData = [{"x":0.352022998034954071044921875,"y":-0.00069475909983391682944731115867398330010473728179931640625,"date":"05\/04\/2021","post_count":10},{"x":0.35039799809455873802477299250313080847263336181640625,"y":0.0036187837493993090832999914852052825153805315494537353515625,"date":"28\/06\/2021","post_count":5},{"x":0.27500700056552884742444575749686919152736663818359375,"y":-0.00784733885446220989778876031550680636428296566009521484375,"date":"17\/06\/2021","post_count":10},{"x":0.27414300516247747108167231999686919152736663818359375,"y":-0.00880806547780367370126253234730029362253844738006591796875,"date":"16\/08\/2021","post_count":10},{"x":0.27314700335264208153063236750313080847263336181640625,"y":0.015060835251561932590647074903245083987712860107421875,"date":"04\/03\/2021","post_count":10},{"x":0.267007000744342803955078125,"y":0.0026149551931834475078375579215617108275182545185089111328125,"date":"10\/06\/2021","post_count":10},{"x":0.25742700472474100426012455500313080847263336181640625,"y":0,"date":"12\/07\/2021","post_count":10},{"x":0.25157499909400937720960200749686919152736663818359375,"y":0.00411753696425227154465087409107582061551511287689208984375,"date":"16\/03\/2021","post_count":10},{"x":0.250909998267889011724918191248434595763683319091796875,"y":0.0114786925007755689909227925227241939865052700042724609375,"date":"01\/07\/2021","post_count":10},{"x":0.2408770024776458740234375,"y":0.005488818492613618642284034621070532011799514293670654296875,"date":"15\/03\/2021","post_count":10},{"x":-0.0952729977667331751067791856257827021181583404541015625,"y":-0.003967285156250034694469519536141888238489627838134765625,"date":"02\/02\/2021","post_count":10},{"x":-0.082474999129772186279296875,"y":0.0081143856897227771562963738460894091986119747161865234375,"date":"06\/05\/2021","post_count":10},{"x":-0.051375003159046174483481905781445675529539585113525390625,"y":-0.0210382173534171268425296830173465423285961151123046875,"date":"28\/01\/2021","post_count":10},{"x":-0.03277300298213958740234375,"y":0.022076783365691778071582263009986490942537784576416015625,"date":"13\/05\/2021","post_count":10},{"x":-0.02980799973011016845703125,"y":-0.0120082207868468342215617639112679171375930309295654296875,"date":"13\/04\/2021","post_count":10},{"x":-0.023530997335910797119140625,"y":-0.007288715769593869832354560145404320792295038700103759765625,"date":"19\/04\/2021","post_count":10},{"x":-0.01386600136756896937961780480463858111761510372161865234375,"y":0.0085609821348949059760524704643103177659213542938232421875,"date":"20\/04\/2021","post_count":10},{"x":-0.00991899836808443104152477332036141888238489627838134765625,"y":0.0163141244339680864527952763864959706552326679229736328125,"date":"01\/02\/2021","post_count":10},{"x":0.002244003117084503173828125,"y":0.0031542898341745113748035844736250510322861373424530029296875,"date":"27\/05\/2021","post_count":10}];
    var ctx6 = document.getElementById('extremesChart').getContext('2d');
    var extremesChart = new Chart(ctx6, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Extreme Sentiment Days vs Next Day Price Change',
                data: extremesData,
                backgroundColor: function(context) {
                    var value = context.raw.x;
                    return value >= 0 
                        ? 'rgba(75, 192, 75, 0.6)'  // Green for positive sentiment
                        : 'rgba(255, 99, 132, 0.6)'; // Red for negative sentiment
                },
                pointRadius: function(context) {
                    return Math.sqrt(context.raw.post_count) / 2 + 3; // Size based on post count
                }
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            var point = context.raw;
                            return [
                                'Date: ' + point.date,
                                'Avg Sentiment: ' + point.x.toFixed(3),
                                'Next Day Price Change: ' + (point.y * 100).toFixed(2) + '%',
                                'Posts: ' + point.post_count
                            ];
                        }
                    }
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Average Daily Sentiment'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Next Day Price Change (%)'
                    },
                    ticks: {
                        callback: function(value) {
                            return (value * 100).toFixed(1) + '%';
                        }
                    }
                }
            }
        }
    });

    // Chart 3 Sentiment Strength vs Volatility Chart
    fetch('get_reddit_qqq_data.php?type=sentiment_volatility')
        .then(response => response.json())
        .then(data => {
            var ctx = document.getElementById('volatilityChart').getContext('2d');
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Sentiment Strength vs Price Volatility',
                        data: data.map(item => ({
                            x: item.sentiment_strength,
                            y: item.volatility,
                            date: item.date,
                            post_count: item.post_count
                        })),
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    var point = context.raw;
                                    return [
                                        'Date: ' + point.date,
                                        'Sentiment Strength: ' + point.x.toFixed(3),
                                        'Price Range: $' + point.y.toFixed(2),
                                        'Posts: ' + point.post_count
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Sentiment Strength'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Price Range ($)'
                            }
                        }
                    }
                }
            });
        });
  </script>
</body>
</html>
